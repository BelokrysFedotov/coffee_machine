{% extends "layout.html.twig" %}

{% block content %}
    <script>
        var appData = {{ data|json_encode()|raw }};
    </script>
    <div id="CoffeeMachine">
        <div class="Debug" v-if="debug">${debug}</div>
        <div class="Machine">
            <ul class="Items">
                <li v-for="item in coffeeMachine.storage.items">
                    <button :disabled="item.disabled" v-on:click="buy(item)">
                        ${item.name} - ${item.price}р x ${item.count}
                    </button>
                </li>
            </ul>

            <div class="Cashbox">
                <table class="Coins">
                    <tr>
                        <th>Coin</th>
                        <th>Count</th>
                    </tr>
                    <tr v-for="item in coffeeMachine.cashBox.items">
                        <td>${item.value}р</td>
                        <td>${item.count}</td>
                    </tr>
                </table>
            </div>

            <div class="Panel">
                <p>${coffeeMachine.status}</p>
                <p>Balance: ${coffeeMachine.balance}р</p>
                <button v-on:click="getChange">Get change</button>
                <button v-on:click="reset">Reset</button>
            </div>


        </div>
        <div class="User">

            <div class="Cashbox">
                <table class="Coins">
                    <tr>
                        <th>Item</th>
                        <th>Count</th>
                        <th></th>
                    </tr>
                    <tr v-for="item in user.cashBox.items">
                        <td>${item.value}р</td>
                        <td>${item.count}</td>
                        <td>
                            <button  :disabled="item.count <= 0" v-on:click="take(item)">Take</button>
                        </td>
                    </tr>
                </table>
            </div>

        </div>
    </div>
{% endblock %}
